# CloudTrail コスト試算

## 1. 本資料の位置付け

本資料は、医療情報システムにおける AWS CloudTrail 利用に伴う費用について、
設計段階での概算試算を示すものである。

本試算は、CloudTrail 設計書および設定手順書の内容を前提とし、
監査・レビュー時における費用妥当性の説明資料として利用することを目的とする。

---

## 2. 前提条件

### 2.1 システム構成前提

* 単一 AWS アカウントでの運用
* CloudTrail を全リージョンで有効化
* 管理イベント：すべて記録（Read / Write）
* データイベント：
  * Amazon S3（バックアップデータ格納用バケットのみ）を対象
* API Gateway + Lambda により Presigned URL を発行し、
  クライアントは直接 S3 にバックアップデータをアップロードする構成

---

### 2.2 証明書基盤前提（参考）

* TLS / mTLS 用証明書は ACM Private CA により発行
* 本資料では、CloudTrail に直接関係する費用を主対象とし、
  Private CA の費用は参考情報として整理する

---

## 3. CloudTrail 管理イベントの費用

### 3.1 管理イベントの課金仕様

* CloudTrail 管理イベントは、
  各アカウントにつき 1 証跡分が無料で提供される
* 全リージョンを対象とした場合でも追加料金は発生しない

---

### 3.2 本システムにおける費用

* 管理イベント記録対象：
  * IAM
  * Amazon S3
  * API Gateway
  * AWS Lambda
  * AWS Certificate Manager
  * ACM Private CA
  * CloudTrail

上記をすべて記録した場合でも、
無料枠内での運用が可能である。

* **管理イベント費用：0 円／月**

---

## 4. CloudTrail データイベント（S3）の費用

### 4.1 課金単価

* Amazon S3 データイベント：
  * 約 0.10 USD / 100,000 イベント

---

### 4.2 イベント数の想定

#### 想定ケース（標準）

* バックアップ実行回数：1 日 1 回
* 1 回のバックアップにおける S3 操作：
  * PutObject：1 回

月間イベント数：

```text
1 回 × 30 日 = 30 イベント／月
```

---

#### 多めに見積もったケース（安全側）

* 1 日あたりの PutObject：10 回
* 月間 PutObject：300 回

月間イベント数：

```text
300 イベント／月
```

---

### 4.3 月額費用試算

```text
300 ÷ 100,000 × 0.10 USD
= 0.0003 USD／月
```

GetObject / DeleteObject を含めた場合でも、
月額費用は誤差レベルである。

* **S3 データイベント費用：実質 0 円／月**

---

## 5. CloudTrail ログ保存（S3）の費用

### 5.1 ログサイズの想定

* 管理イベント中心の構成
* ログ生成量：約 数 MB／日（安全側に多めに見積もり）

仮に 1 日 5 MB とした場合：

```text
5 MB × 30 日 = 150 MB／月
```

---

### 5.2 S3 保存費用（概算）

* S3 Standard：約 0.023 USD／GB

```text
0.15 GB × 0.023 USD ≒ 0.0035 USD／月
```

* **ログ保存費用：数円未満／月**

---

## 6. その他の CloudTrail 関連費用

* ログファイル整合性検証：追加費用なし
* CloudTrail 設定変更・全リージョン化：追加費用なし

---

## 7. 参考：ACM Private CA の費用

※ 本項は CloudTrail 直接費用ではないが、
設計全体のコスト説明のため参考として記載する。

* ACM Private CA：
  * 約 400 USD／月／CA
* 証明書発行費用：
  * クライアント証明書枚数が少量の場合は軽微
  * **証明書基盤の費用は CloudTrail 費用を大きく上回る**

---

## 8. 月額費用まとめ（概算）

| 項目 | 月額費用 |
| --- | --- |
| CloudTrail 管理イベント | 0 円 |
| CloudTrail S3 データイベント | 実質 0 円 |
| CloudTrail ログ保存（S3） | 数円未満 |
| **CloudTrail 合計** | **ほぼ 0 円** |
| ACM Private CA（参考） | 約 400 USD |

---

## 9. まとめ

本システムにおける CloudTrail 利用は、
管理イベントが無料枠内であり、
データイベントも対象を限定しているため、
運用コストへの影響は極めて軽微である。

医療情報ガイドラインに対応するための操作証跡取得として、
費用対効果の高い構成であると評価できる。
